# Nova-compute-node: parsing log lines
___

As of this version, there are only two types of log lines in a log file generated by the *nova compute node*.

1. `INFO` messages, with details
2. `WARNING` messages, with details

___

## `INFO` type

```log
2020-10-01 18:36:01.835 4831 INFO nova.compute.resource_tracker [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] Final resource view: name=dual-c phys_ram=128453MB used_ram=41472MB phys_disk=66967GB used_disk=200GB total_vcpus=64 used_vcpus=20 pci_stats=[]
2020-10-02 10:28:07.238 4831 INFO nova.compute.resource_tracker [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] Final resource view: name=dual-c phys_ram=128453MB used_ram=41472MB phys_disk=66967GB used_disk=200GB total_vcpus=64 used_vcpus=20 pci_stats=[]
2020-10-02 10:27:04.901 4831 INFO nova.compute.resource_tracker [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] Final resource view: name=dual-c phys_ram=128453MB used_ram=41472MB phys_disk=66967GB used_disk=200GB total_vcpus=64 used_vcpus=20 pci_stats=[]
2020-10-02 10:26:02.580 4831 INFO nova.compute.resource_tracker [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] Final resource view: name=dual-c phys_ram=128453MB used_ram=41472MB phys_disk=66967GB used_disk=200GB total_vcpus=64 used_vcpus=20 pci_stats=[]
2020-10-02 10:25:02.840 4831 INFO nova.compute.resource_tracker [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] Final resource view: name=dual-c phys_ram=128453MB used_ram=41472MB phys_disk=66967GB used_disk=200GB total_vcpus=64 used_vcpus=20 pci_stats=[]
```

### The `grok` pattern for `INFO`

```yml
%{TIMESTAMP_ISO8601:time} %{NUMBER:info_code} %{WORD:message_type} %{DATA:info_desc} \[req-%{DATA:req_id} - %{GREEDYDATA}\] %{DATA}=%{DATA:resource_name} %{GREEDYDATA}=%{DATA:res_phys_ram} %{GREEDYDATA}=%{DATA:res_used_ram} %{GREEDYDATA}=%{DATA:res_phys_disk} %{GREEDYDATA}=%{DATA:res_used_disk} %{GREEDYDATA}=%{DATA:res_total_vcpus} %{GREEDYDATA}=%{DATA:res_used_vcpus} %{GREEDYDATA}=%{GREEDYDATA:res_pci_stats}
```

___

## `WARNING` type

```log
2020-10-01 17:54:17.631 4831 WARNING nova.pci.utils [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] No net device was found for VF 0000:3b:01.5: PciDeviceNotFoundById: PCI device 0000:3b:01.5 not found
2020-10-02 10:28:05.952 4831 WARNING nova.pci.utils [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] No net device was found for VF 0000:3b:01.6: PciDeviceNotFoundById: PCI device 0000:3b:01.6 not found
2020-10-02 10:27:04.555 4831 WARNING nova.pci.utils [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] No net device was found for VF 0000:3b:01.3: PciDeviceNotFoundById: PCI device 0000:3b:01.3 not found
2020-10-02 10:26:02.347 4831 WARNING nova.pci.utils [req-fef1267e-f155-417a-b5aa-73e1fa7eb7f1 - - - - -] No net device was found for VF 0000:3b:01.5: PciDeviceNotFoundById: PCI device 0000:3b:01.5 not found
```

### The `grok` pattern for `WARNING`

```yml
%{TIMESTAMP_ISO8601:time} %{NUMBER:warning_code} %{WORD:message_type} %{DATA:service} \[req-%{GREEDYDATA:request_id} - - - - -\] %{GREEDYDATA:err_msg} %{GREEDYDATA:VF_number}: %{DATA:pci_device_error}: %{WORD:device_type} device %{DATA:device_id2} %{GREEDYDATA:error_msg_dev}
```

> Parsing was realized with the help of a grok debugger, for automatic structuring of the actual log line. [Source for live grok debugger](https://grokdebug.herokuapp.com/).